<html>
<head>
	<title>Software Project Visualizer</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
	<link type="text/css" href="css/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
    <script type="text/javascript" src="js/libs/jquery.min.js"></script>
    <script type="text/javascript" src="js/libs/jquery.scrollTo.min.js"></script>
	<script type="text/javascript" src="js/libs/ajaxfileupload.js"></script>
	<script type="text/javascript" src="js/ui/jquery-ui-1.8.16.custom.min.js"></script>
	<script type="text/javascript">
	$(document).ready(function() {

	    $('a.link').click(function () {  
		$('article').scrollTo($(this).attr('href'), 300);
		$('#box2').append('<embed width="100%" height="100%" src="../Znode/index.html"/>');
	    $('a.link').removeClass('selected');  
		$(this).addClass('selected');
		return false;
	    });  
		
		$('#open').click(function () { 
		 fetchFiles();
		$('#openWin').fadeIn();
		});
		$('#fileContent, #upload').click(function () { 
		$('#openWin').fadeOut();
		});
		$('#upload').click(function () { 
		$('#displaybox').show();
		}); 
		$('#closeOverlay').click(function () { 
		$('#displaybox').hide();
		}); 
		$('#fileContent .inner img').live("click", function(event){ 
		$(this).parent().remove();
		});  
		
        $("#files li").live("click", function(event){
		    event.preventDefault();
			var fileName=$(this).children().attr('href');
			$.get('php/getContent.php?fname='+fileName, function(data) {
		    $('#fileContent').append('<div class=inner/>');
			var n = $(".inner").last();
			n.append('<img src="images/db.png"/>');
			n.append('<p style="background-color:#db0;color:#fff;text-align:center;border-bottom: 1px solid #a80;">'+fileName+"</p>");
			n.append('<div style="padding:0.8em;" >'+data+'</div>');
		    n.resizable();
			n.draggable();
			});
			
		}); 
		
		$('#submit').live("click", function(event){
	          event.preventDefault();
		      ajaxFileUpload();
		});
		
	     function fetchFiles(){
  	        var fileList =  $("#files");
              fileList.load("php/getFiles.php");
			 }
   
        function ajaxFileUpload()
	{ 
		$.ajaxFileUpload
		(
			{
				url:'php/doajaxfileupload.php',
				secureuri:false,
				fileElementId:'fileToUpload',
				dataType: 'json',
				data:{name:'logan', id:'id'},
				success: function (data, status)
				{
					if(typeof(data.error) != 'undefined')
					{
						if(data.error != '')
						{alert(data.error);}
						else
						{alert(data.msg);}
					}
				},
				error: function (data, status, e)
				{alert(e);}
			}
		)
		return false;

	}
	
	});
  
	</script>
</head>

<body>
	
	<header>
   	<h1 id="logo"></h1>
      <ul id="menu">
       	  <li><a href="#box1" class="link">Home</a></li>
            <li><a href="#box2" class="link">View1</a></li>
            <li><a href="#box3" class="link">View2</a></li>
            <li><a href="#box4" class="link">View3</a></li>
      </ul>

</header><!-- end header -->
<article>
<ul id="mask">
 <li id="box1" class="box">
		<!--left open window, default hide-->
    <div id="openWin">
      <div id="fileTitle">Files:</div>
      <ul id="files"></ul>
    </div>
		
		<div id="main">
      <div id="logo" >SouceCode</div>
      <div id="open" class="btn">Open</div>
	  <div id="upload" class="btn">Upload</div>
	  </div>
	  
	  	
	  <div id="fileContent"></div>
  </li><!-- end box1 -->
			
            <li id="box2" class="box">
            <!--  <div class="content"></div>-->
            </li><!-- end box2 -->
			
            <li id="box3" class="box">
          <!--  <div class="content"></div>-->
            </li><!-- end box3 -->
			
            <li id="box4" class="box">
            <div class="content"></div>
            </li><!-- end box4 -->
			
</ul><!-- end mask -->
</article><!-- end article wrapper -->

<div id="displaybox">
	<div id="spv" style="z-index: 99999; top: 260px; left: 430px; position: fixed; display: block; ">
	  <div>
	  	<h2>Software Project Visualizer</h2>
        <p>
	     This dialog is opened programmatically when the "Upload Files" button is clicked.
		</p>
		<form name="form" action="" method="post" enctype="multipart/form-data" >
		<input id="fileToUpload" type="file" size="45" name="fileToUpload" class="input"/>
        <input type="submit" value="Submit" id="submit"/>
		<input type="button" value="Close" id="closeOverlay" />
       </form>
	   
	  </div>
	</div>
</div>
	
</body>
</html>
